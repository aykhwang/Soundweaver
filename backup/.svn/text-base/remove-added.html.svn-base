<html>
<body onselectstart="return false">

<a href="javascript:addNote('c2','w');"><img src="resources/wholenote/c/Wholenote_red_C.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('d2','w');"><img src="resources/wholenote/d/Wholenote_red_D.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('e2','w');"><img src="resources/wholenote/e/Wholenote_red_E.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('f2','w');"><img src="resources/wholenote/f/Wholenote_red_f.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('g2','w');"><img src="resources/wholenote/g/Wholenote_red_g.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('a2','w');"><img src="resources/wholenote/a/Wholenote_red_A.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('b2','w');"><img src="resources/wholenote/b/Wholenote_red_b.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp <br />

<a href="javascript:addNote('c3','w');"><img src="resources/wholenote/c/Wholenote_green_c.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('d3','w');"><img src="resources/wholenote/d/Wholenote_green_d.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('e3','w');"><img src="resources/wholenote/e/Wholenote_green_e.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('f3','w');"><img src="resources/wholenote/f/Wholenote_green_f.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('g3','w');"><img src="resources/wholenote/g/Wholenote_green_g.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('a3','w');"><img src="resources/wholenote/a/Wholenote_green_a.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('b3','w');"><img src="resources/wholenote/b/Wholenote_green_b.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp <br />

<a href="javascript:addNote('c4','w');"><img src="resources/wholenote/c/Wholenote_blue_c.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('d4','w');"><img src="resources/wholenote/d/Wholenote_blue_d.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('e4','w');"><img src="resources/wholenote/e/Wholenote_blue_e.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('f4','w');"><img src="resources/wholenote/f/Wholenote_blue_f.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('g4','w');"><img src="resources/wholenote/g/Wholenote_blue_g.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('a4','w');"><img src="resources/wholenote/a/Wholenote_blue_a.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp 
<a href="javascript:addNote('b4','w');"><img src="resources/wholenote/b/Wholenote_blue_b.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp <br />


<a href="javascript:addNote('c2','h');"><img src="resources/halfnote/c/halfnote_red_c.png" /></a>&nbsp&nbsp&nbsp&nbsp&nbsp

<br />
<br/>
<div id="staff"><br /></div><img src="resources/delete.png" onclick="javascript:removeNote();"/><div id="preview"></div><br /><br />
<img src="resources/cooltext.png" onmouseover="this.src='resources/cooltextMouseOver.png';" onmouseout="this.src='resources/cooltext.png';" onclick="javascript:play();"/><h3><a href="javascript:clear();">CLEAR</a>

<style type="text/css">
::selection {
	background: #ffffff;
}
#staff {
	font-size:50px;
	font-family:Arial;
	border: 3px dashed #ccc;
    margin: 10px;
    padding: 10px;
}

a {
	font-size:32px;
	font-family:Georgia;
}

#play {
	font-size:100px;
}

body {
	text-align:center;
}
table {
	width:100%;
	height:60px;
	text-align:center;
}
td {
	height:30px;
}
#space {
	height:10px;
	background-color:blue;
}
#line {
	height:10px;
	background-image: url("resources/line.png");
}
#line1 {
	height:10px;
	background-image: url("resources/line.png");
}
a {
	margin:0px;
}

</style>
<script src="http://html5demos.com/h5utils.js"></script> 
<script type="text/javascript">
var notenum = 1;
var note;
var type;
function addNote(note,type) {
	
	var staff = document.getElementById("staff").innerHTML;
	var color;
	if (note.substr("1","1") == "2") {
		color = 'red';
	}
	else if (note.substr("1","1") == "3") {
		color = 'green';
	}
	else if (note.substr("1","1") == "4") {
		color = 'blue';
	}
	notename = note.substr("0","1");
	var notetype;
	if (type == "w") {
		notetype = 'wholenote';
	}
	else if (type == "h") {
		note = note+"h";
	}
	var htmlimgsrc = '<img name="staffimg" id="img'+notenum+'" src="resources/'+notetype+'/'+notename+'/'+notetype+'_'+color+'_'+notename+'.png" />';
		
	note = '<audio class="'+type+'" id="note'+notenum+'" src="notes/'+note+'.mp3"></audio>'+htmlimgsrc;
	document.getElementById("staff").innerHTML = staff + note;
	notenum = notenum+1;
	
	return null;
}

function play() {
	//get the list of audio files
	var audio = document.getElementsByTagName("audio");
	for(var i=1;i<=audio.length;i++){
		if (document.getElementById("note"+i).className == "w") {
			document.getElementById("note"+i).play();
			
			var date = new Date();
       		var curDate = null;
 
	        do { curDate = new Date(); } 
    	    while(curDate-date < 1000)
        
        	
		}
		else if (document.getElementById("note"+i).className == "h") {
		
			document.getElementById("note"+i).play();

			
			var date = new Date();
       		var curDate = null;
 
	        do { curDate = new Date(); } 
    	    while(curDate-date < 500)
   
        
        	
		}

				
	}
	
			
}

function clear() {
	location.reload(true);
}



var drop = document.querySelector('#staff');

// Tells the browser that we *can* drop on this target
addEvent(drop, 'dragover', cancel);
addEvent(drop, 'dragenter', cancel);

addEvent(drop, 'drop', function (event) {
  // stops the browser from redirecting off to the text.
  if (event.preventDefault) {
    event.preventDefault();
  }

  var code = event.dataTransfer.getData("text/uri-list").substr("20","2");
  var type = event.dataTransfer.getData("text/uri-list").substr("25","1");
  
  addNote(code,type);

  return false;
});

function cancel(event) {
  if (event.preventDefault) {
    event.preventDefault();
  }
  return false;
}

function removeNote() {
	var audio = document.getElementsByTagName("audio");
	var imgs = document.getElementsByName("staffimg");
	imglength = imgs.length;
	length = audio.length;
	var removed = document.getElementById("note"+length);
	
	if (imglength == 1) {
		clear();
	}
	document.getElementById("staff").removeChild(document.getElementById("note"+length));
	document.getElementById("staff").removeChild(document.getElementById("img"+length));
}

</script>
</body>
</html>